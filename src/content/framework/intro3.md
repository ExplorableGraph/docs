---
title: Virtual content
numberHeadings: true
intro = client/samples/frameworkIntro:
# Mocks for the code samples below
files:
  src: |
    "+.yaml": |
      # Origami formulas for the About Us web site.
      message: Hello, world!
virtual:
  src = graphVirtual(files/src):
---

A key concept in the Graph Origami framework is _virtual_ content: things that are generated by code but which you can browse and work with just like real content.

## Define virtual content in a YAML file

<span class="tutorialStep"></span> Inside the `src` folder, create a file called `+.yaml`.

The name of the `+.yaml` is a signal to the Origami framework that anything inside the file should be considered a virtual member of the containing folder. You can rename that file anything that starts with a plus sign, like `+formulas.yaml`.

This `+.yaml` file could also be a JSON file, but we'll use a YAML file for this tutorial because it'll be more concise.

Any keys you define in this file will appear as the name of a virtual file in the containing `src` folder. You can think of this file as something like a spreadsheet, only instead of defining and manipulating numbers, you can use this file to define and manipulate data, files, and other content.

## Define a virtual value

As an example of a simple virtual value, let's define the title of your site as a virtual value that can be referenced on all the pages.

<span class="tutorialStep"></span> Add a line to the `+.yaml` file:

```{{'yaml'}}
{{ intro/siteInitial.yaml }}
```

The line you've just added defines a key called `siteName` with a value of "Our Amazing Team". Because that key/value definition is sitting in the `+.yaml` file, the Graph Origami framework treats that value as a virtual file in the containing `src` folder when that folder is viewed in the browser (or through other means, such as a command terminal).

<span class="tutorialStep"></span> Without needing to do anything else, in the browser pane/window showing your served site, navigate to the `src` folder.

You will see a listing that includes an entry for `siteName`.

<span class="tutorialStep"></span> Click on the `siteName` link to navigate to a page that says "Our Amazing Team".

By adding an entry to a data file, you've created a virtual file that is visible via the Graph Origami server.

You don't have to use the Graph Origami server: you can integrate the support for formulas into other servers (e.g., [Express](http://expressjs.com/)). Later in this tutorial you'll dispense with a live server altogether by building static files that you can host anywhere.

## Conceptualize real and virtual files as graphs

In addition to viewing a virtual file in the served site as you did above, at any time you can also view a virtual file in the command line with the command-line tool, ori.

<span class="tutorialStep"></span> In the terminal, press Ctrl+C to stop the running server, then:

```console assert: true, path: files
$ ls src
+.yaml
$ ori src
"+.yaml": |
  # Origami formulas for the About Us web site.
  siteName: Our Amazing Team
```

(Reminder: if running locally, you'll need to use `npx ori` whenever invoking the ori tool.)

If you ask ori to render the `src` folder, it returns a graph of the real files in the `src` folder. It displays this graph in YAML form. At the moment, there is just one file called `+.yaml` that defines a key called `siteName`.

You can visualize the real files in the `src` folder as a graph:

<figure>
  {{ svg files/src }}
  <figcaption>The src folder graph has one real file</figcaption>
</figure>

If you ask ori to show the contents of a _virtual_ graph based on `src`, the resulting virtual graph includes the real files and any virtual files you've defined. The virtual graph omits special files like `+.yaml`.

<span class="tutorialStep"></span> View the virtual files:

```console assert: true, path: files
$ ori virtual/src
{{ yaml virtual/src }}
```

The `virtual` graph has a virtual `siteName` file that contains "Our Amazing Team"

<figure>
  {{ svg virtual/src }}
  <figcaption>Virtual graph includes the virtual siteName file</figcaption>
</figure>

The `src` files graph above is your starting point: the real files you create by transcribing the ideas and information in your head or collecting data from elsewhere. Through step-by-step transformations, you create a final `virtual` graph that represents the artifact you wish your audience to view or use.

_Transforming graphs is the fundamental operation of the Origami framework._

The ori command-line interface knows how to traverse graphs, including virtual graphs.

<span class="tutorialStep"></span> Ask ori to display a single virtual file on demand:

```console assert: true, path: files
$ ori virtual/src/siteName
Our Amazing Team
```

In the steps that follow, you will define Origami formulas to dynamically create data and HTML pages. At any point you can view those in the browser, or use ori to view those virtual files in the command line.

Origami lets you create virtual folders and files using formulas.

## Define a formula in a YAML key

Origami lets you define virtual values by defining formulas in the _key_ of a key/value pair.

<span class="tutorialStep"></span> Update the `+.yaml` file to include the new line shown below:

```{{'yaml'}}
{{ intro/siteFormula.yaml }}
```

Note the final `:` at the end of that line. You're defining a new _key_ in the YAML file that contains the whole formula. That key is everything before the colon. The value is whatever after the colon — in this case, no value is given, so the value is `null`. The virtual value we ultimately want is going to be defined by evaluating the formula.

In this case, the formula is trivial, and defines `greeting` as an alias for `message`.

<span class="tutorialStep"></span> View the contents of this virtual `greeting` value in the command line:

```console
$ ori virtual/src/greeting
Hello, world!
```

<span class="tutorialStep"></span> Restart the server:

```console
$ ori serve
```

You can now view the virtual `greeting` value in the `src` folder. Text next to `greeting` in gray indicates this is a virtual file generated by the above formula.

This is a trivial example of a formula; let's try something more interesting.

## Invoke a JavaScript function from a formula

If you don't consider yourself a JavaScript programmer, don't worry, JavaScript isn't necessary to build this particular site, or required to use Origami in general. We'll just use it here as just an example of how data might be transformed with regular JavaScript.

<span class="tutorialStep"></span> In the `src` folder, create a JavaScript file called `greet.js` and paste in the following:

```{{'js'}}
{{ intro/greet.js }}
```

You can use this `greet` formula in an Origami function to generate the contents of a virtual file.

<span class="tutorialStep"></span> Add the following line to the `+.yaml` file:

```yaml
hello.html = greet('world'):
```

Be sure to use single quotes, not double quotes. And again note the final colon — everything to the left of that colon is a YAML key.

This formula defines a virtual file called `hello.html`. The value or contents of that virtual file will be the result of evaluating the expression `greet('world')`. In this case, the reference to `greet` will obtain the function exported by `greet.js`, then invoke that function.

<span class="tutorialStep"></span> Navigate to the `src` route, which will now show an entry for `hello.html`. Open that page to see "Hello, <em>world</em>!".

Each time you ask for `hello.html`, the web server evaluates the corresponding formula that invokes `greet`. (If you're running this tutorial locally, you can verify this by setting a breakpoint within the greet function, then visiting `hello.html`.)

Since the `greet` function is regular JavaScript, you can use that JavaScript to create HTML by any means you like. If the function is asynchronous, Origami will `await` the result before serving it to the browser. With that, you should be able to do essentially anything you want in the JavaScript function to create any HTML result.

A function like `greet` here transforms data from one form into another — in this case, it transforms a string name to an HTML greeting. The function and the file name formula that invokes it could just as easily transform other kinds of data; there's nothing special about text here.

&nbsp;

Next: [Metagraphs](intro4.html) »
