---
title: Create virtual files with formulas
numberHeadings: true
intro = client/samples/frameworkIntro:
# Mocks for the code samples below
files:
  src: |
    "+.yaml": |
      # Origami formulas for the About Us web site.
      message: Hello, world!
virtual:
  src = graphVirtual(files/src):
---

Origami lets you create virtual folders and files using formulas.

## Define a formula in a YAML key

Origami lets you define virtual values by defining formulas in the _key_ of a key/value pair.

<span class="tutorialStep"></span> Update the `+.yaml` file to include the new line shown below:

```{{'yaml'}}
{{ intro/siteFormula.yaml }}
```

Note the final `:` at the end of that line. You're defining a new _key_ in the YAML file that contains the whole formula. That key is everything before the colon. The value is whatever after the colon — in this case, no value is given, so the value is `null`. The virtual value we ultimately want is going to be defined by evaluating the formula.

In this case, the formula is trivial, and defines `greeting` as an alias for `message`.

<span class="tutorialStep"></span> View the contents of this virtual `greeting` value in the command line:

```console
$ ori virtual/src/greeting
Hello, world!
```

<span class="tutorialStep"></span> Restart the server:

```console
$ ori serve
```

You can now view the virtual `greeting` value in the `src` folder. Text next to `greeting` in gray indicates this is a virtual file generated by the above formula.

This is a trivial example of a formula; let's try something more interesting.

## Invoke a JavaScript function from a formula

If you don't consider yourself a JavaScript programmer, don't worry, JavaScript isn't necessary to build this particular site, or required to use Origami in general. We'll just use it here as just an example of how data might be transformed with regular JavaScript.

<span class="tutorialStep"></span> In the `src` folder, create a JavaScript file called `greet.js` and paste in the following:

```{{'js'}}
{{ intro/greet.js }}
```

You can use this `greet` formula in an Origami function to generate the contents of a virtual file.

<span class="tutorialStep"></span> Add the following line to the `+.yaml` file.

```yaml
hello.html = greet('world'):
```

Be sure to use single quotes, not double quotes. And again note the final colon — everything to the left of that colon is a YAML key.

This formula defines a virtual file called `hello.html`. The value or contents of that virtual file will be the result of evaluating the expression `greet('world')`. In this case, the reference to `greet` will obtain the function exported by `greet.js`, then invoke that function.

<span class="tutorialStep"></span> Navigate to the `src` route, which will now show an entry for `hello.html`. Open that page to see "Hello, <em>world</em>!".

Each time you ask for `hello.html`, the web server evaluates the corresponding formula that invokes `greet`. (If you're running this tutorial locally, you can verify this by setting a breakpoint within the greet function, then visiting `hello.html`.)

Since the `greet` function is regular JavaScript, you can use that JavaScript to create HTML by any means you like. If the function is asynchronous, Origami will `await` the result before serving it to the browser. With that, you should be able to do essentially anything you want in the JavaScript function to create any HTML result.

A function like `greet` here transforms data from one form into another — in this case, it transforms a string name to an HTML greeting. The function and the file name formula that invokes it could just as easily transform other kinds of data; there's nothing special about text here.

&nbsp;

Next: [Thinking in graphs](intro4.html) »
