---
title: Create virtual files with formulas
numberHeadings: true
---

The Origami framework is designed to transform digital content that you can create directly — data, files, and other resources — into forms that can be viewed and used by your audience. It's built on a conceptual paradigm for considering common development tasks that can be translated directly into an efficient [expression language](/language) for describing what you want.

This introduction walks you through the practical example of creating a simple About Us area for a hypothetical organization.

... link to example site ...

To lay the groundwork for that, let's begin with some "Hello, world" exercises of basic Origami features.

## Create a formula

The Origami framework lets you quickly create virtual files and folders by writing formulas in the file names of real files. These formulas define transformations of real content (text, data) into virtual content.

In a code editor, open the sample project and view the contents of the `hello` folder. This folder is initially empty.

In the `hello` folder, create a new, empty file with the following _name_:

```console
message = 'Hello, world!'
```

The file name should be that _entire_ formula, including the `=` sign and the single quotes. Yes, it doesn't look like a normal file name, but it is a valid file name in mainstream operating systems.

The formula in the file name has meaning in the Origami framework.

- The left-hand side of the formula defines the name of a virtual file, `message`.
- The right-hand side is an expression that will be evaluated to determine the value or contents of that virtual file. Here the virtual `message` file will be a text string.
- The file name itself is sufficient to define the behavior. The file itself can be empty, although it may also contain useful information that can be processed by the formula.

Without needing to do anything else, point your browser at http://localhost:5000/hello. You should now see a listing that includes:

1. the real file named `message = 'Hello, world!'`
1. the virtual file named `message` that was generated by the above formula

If you click on the name of that `message` file, you will navigate to a page called http://localhost:5000/hello/message that says "Hello, world!"

The ori `serve` command you issued earlier is aware of Origami formulas. The server parses file names that contain formulas with an `=` sign and interprets them.

You don't have to use the Origami server: you can integrate the support for formulas into other servers like [Express](http://expressjs.com/). Later you'll also see how to dispense with a live server entirely by building static files that can be hosted anywhere.

## Conceptualizing real and virtual files as graphs

The Origami framework and the ori command line tool use the same formula language. In addition to viewing the result of a formula in the browser as you did above, at any time you can also view the value of a formula in the command line with the ori tool.

In the terminal, change to the `hello` directory and run these commands:

```console
$ ls
message = 'Hello, world!'
$ ori files
"message = 'Hello, world!'": ""
```

The ori `files` function returns a graph of the real files in the current folder. The `hello` folder only contains one real file called `message = 'Hello, world!'`. If you ask ori to display the local `files` graph, it will list (in YAML form) the single real file and indicate that it is empty (`""`).

You can visualize the `files` graph as a node (the folder) that points to a single value (an empty file).

<figure>
  <img src="/figures/filesGraph.svg">
  <figcaption>Source graph containing a single real, empty file</figcaption>
</figure>

In Origami terms, this graph of real files is the _source form_, or starting point, of what will become a trivial handful of web pages.

If you ask ori to show the contents of the local `virtual` graph, the formulas in file names will be interpreted. The resulting virtual graph will include _both_ the real files and any new virtual files implied by formulas.

```console
$ ori virtual
message: Hello, world!
"message = 'Hello, world!'": ""
```

In this case, the `virtual` graph includes: 1) the virtual `message` file whose contents are "Hello, world!", and 2) the empty real file whose file name implies the creation of the virtual file. This `virtual` graph looks like:

<figure>
  <img src="/figures/appGraph.svg">
  <figcaption>Result graph that includes the virtual file generated from the formula</figcaption>
</figure>

The `files` graph above is your starting point: the real files you create by transcribing the ideas and information in your head or collecting data from elsewhere. Through step-by-step transformations, you create a final virtual graph that represents the artifact you wish your audience to view or use.

_Transforming graphs is the fundamental operation of the Origami framework._

Since the ori command-line interface knows how to traverse graphs, you can ask ori to display a single virtual file from the `virtual` graph on demand:

```console
$ ori virtual/message
Hello, world!
```

In the steps that follow, you will define Origami formulas that dynamically create data and HTML pages. At any point you can view those in the browser, or use ori to view those virtual files in the command line.

We'll come back to graph transformations, but first let's create some more interesting formulas.

## Invoke a JavaScript function from a formula

In the same `hello` folder, create a JavaScript file called `greet.js` and paste in the following:

```{{'js'}}
{{ client/samples/framework.yaml/hello/greet.js }}
```

This function generates an HTML fragment that greets a person by name if a name is supplied, or says "Hello, world!" if no name is given.

You can use this `greet` formula in an Origami function to generate the contents of a virtual file.

Create a new file and set its name to the entire formula below:

```console
hello.html = greet()
```

This will define a virtual file called `hello.html`. The value or contents of that virtual file will be the result of invoking the function exported by the `greet.js` module. Origami follows a convention that `greet` is a reference to whatever is exported by `greet.js` — in this case, a function to invoke.

If you open http://localhost:5000/hello/hello.html, you'll now see "Hello, **world**!". Each time you ask for `hello.html`, the web server will evaluate the formula you defined.

As before, you can view the contents of this HTML page in the command line:

```console
$ ori virtual/hello.html
{{ client/samples/framework.yaml/hello/hello.html }}
```

## Pass an argument to a function

You can pass arguments to function like `greet`. In the same `hello` folder, create a new file called:

```console
alice.html = greet('Alice')
```

Be sure to use single quotes, not double quotes. To encourage cross-platform compatibility with Microsoft Windows, which does not allow double quotes in file names, Origami doesn't recognize double quotes.

You should now be able to open http://localhost:5000/hello/alice.html and see "Hello, **Alice**!"

Since the function the formula calls is regular JavaScript, you can use that JavaScript to create HTML by any means you like. If the function is asynchronous, Origami will `await` the result before serving it to the browser. With that, you should be able to do essentially anything you want in the JavaScript function to create any HTML result.

A function like `greet` here is essentially transforming a single piece of data from one form (a string) into a different form — HTML intended for presentation. But the function and the formula that invokes it could just as easily be transforming the data into other forms; there's nothing special about HTML here.
