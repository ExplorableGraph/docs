---
title: Create virtual files with formulas
numberHeadings: true
intro = client/samples/frameworkIntro:
# Mocks for the code samples below
files:
  src: |
    "message = 'Hello, world!'": ""
virtual:
  src = graphVirtual(files/src):
---

Origami lets you create virtual folders and files using formulas.

## Create a formula

<span class="tutorialStep"></span> Inside the `src` folder, create a new, empty file with the following _file name_:

```console
message = 'Hello, world!'
```

The file name should be that _entire_ formula, including the `=` sign and the single quotes. Yes, it doesn't look like a normal file name, but it is a valid file name in mainstream operating systems.

The formula in the file name has meaning in the Origami framework.

- The left-hand side of the formula defines the name of a virtual file, `message`.
- The right-hand side is an expression that will be evaluated to determine the value or contents of that virtual file. Here the virtual `message` file will be a text string.
- The file name itself is sufficient to define the behavior. In all the formulas needed for this tutorial, the file itself will be empty. In other situations, the file itself may contain information that can be processed by the formula.

## View the virtual file implied by the formula

<span class="tutorialStep"></span> Without needing to do anything else, in the browser pane/window showing your served site, navigate to the `src` folder.

You will see a listing that includes a file or page named `message`. A notation next to it indicates this is a virtual file generated by the above formula.

<span class="tutorialStep"></span> Click on the `message` link to navigate to a page that says "Hello, world!"

The ori web server is aware of Origami formulas. The server parses file names that contain formulas with an `=` sign and interprets them.

You don't have to use the Origami server: you can integrate the support for formulas into other servers (e.g., [Express](http://expressjs.com/)). Later in this tutorial you'll dispense with a live server altogether by building static files that you can host anywhere.

## Conceptualize real and virtual files as graphs

Origami includes a framework and a command line tool that use the same formula language. In addition to viewing the result of a formula in the served site as you did above, at any time you can also view the value of a formula in the command line with the command-line tool, ori.

<span class="tutorialStep"></span> In the terminal, press Ctrl+C to stop the running server, then:

```console assert: true
$ ls src
message = 'Hello, world!'
$ ori src
"message = 'Hello, world!'": ""
```

(Reminder: if running locally, you'll need to use `npx ori` whenever invoking the ori tool.)

If you ask ori to render the `src` folder, it returns a graph of the real files in the `src` folder. It displays this graph in YAML form. At the moment, there is just an empty file called `message = 'Hello, world!'`.

You can also visualize this `src` folder graph:

<figure>
  {{ svg files/src }}
  <figcaption>The src folder graph has one real, empty file</figcaption>
</figure>

If you ask ori to show the contents of a _virtual_ graph based on `src`, it interprets the formulas in file names. The resulting virtual graph includes _both_ the real files and any new virtual files implied by formulas.

<span class="tutorialStep"></span> View the virtual files:

```console assert: true
$ ori virtual/src
message: Hello, world!
"message = 'Hello, world!'": ""
```

The `virtual` graph here includes a virtual `message` file whose contents are "Hello, world!". This `virtual` graph looks like:

<figure>
  {{ svg virtual/src }}
  <figcaption>Virtual graph includes the virtual message file</figcaption>
</figure>

The `src` files graph above is your starting point: the real files you create by transcribing the ideas and information in your head or collecting data from elsewhere. Through step-by-step transformations, you create a final `virtual` graph that represents the artifact you wish your audience to view or use.

_Transforming graphs is the fundamental operation of the Origami framework._

The ori command-line interface knows how to traverse graphs, including virtual graphs.

<span class="tutorialStep"></span> Ask ori to display a single virtual file on demand:

```console assert: true
$ ori virtual/src/message
Hello, world!
```

In the steps that follow, you will define Origami formulas to dynamically create data and HTML pages. At any point you can view those in the browser, or use ori to view those virtual files in the command line.

This is a trivial example of a formula; let's try something more interesting.

## Invoke a JavaScript function from a formula

<span class="tutorialStep"></span> In the `src` folder, create a JavaScript file called `greet.js` and paste in the following:

```{{'js'}}
{{ intro/greet.js }}
```

If you don't consider yourself a JavaScript programmer, fear not, it's not necessary to build the final site or required to use Origami. We'll just use it here as just one example of how data might be transformed.

You can use this `greet` formula in an Origami function to generate the contents of a virtual file.

<span class="tutorialStep"></span> Create a new file and set its name to the entire formula below. (More fun: use your own name instead of "Alice".)

```console
hello.html = greet('Alice')
```

As before, be sure to use single quotes, not double quotes. For cross-platform file name compatibility, Origami doesn't recognize double quotes.

This formula defines a virtual file called `hello.html`. The value or contents of that virtual file will be the result of invoking the function exported by the `greet.js` module. In Origami, this reference to `greet` will be interpreted as a reference to whatever is exported by `greet.js` — in this case, invoking the above function.

<span class="tutorialStep"></span> View the contents of this virtual HTML page in the command line:

```console
$ ori virtual/src/hello.html
Hello, Alice!
```

<span class="tutorialStep"></span> Restart the server to view the virtual page in the served site:

```console
$ ori serve
```

<span class="tutorialStep"></span> Navigate to the `src` route, which will now show an entry for `hello.html`. Open that page to see "Hello, Alice!".

Each time you ask for `hello.html`, the web server evaluates the formula. Since the function is regular JavaScript, you can use that JavaScript to create HTML by any means you like. If the function is asynchronous, Origami will `await` the result before serving it to the browser. With that, you should be able to do essentially anything you want in the JavaScript function to create any HTML result.

A function like `greet` here transforms data from one form into another — in this case, it transforms a string name to a string greeting. The function and the formula that invokes it could just as easily transform other kinds of data; there's nothing special about text here.

&nbsp;

Next: [Thinking in graphs](intro3.html) »
